<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <script type="text/javascript">
            console.log("script");


            function onImageChange(){
                var reader = new FileReader();
                console.log('reader', reader);

                var img1 = document.getElementById('imgId');
                console.log('onImageChange img1 = ', img1);
                var file = document.getElementById("inputId").files[0];
                console.log('file = ', file);

                reader.onloadend = function(){
                    img1.src = reader.result;
                    console.log('img1.src', img1.src);
                }

                if (file) {
                    reader.readAsDataURL(file);
                } else {
                    img1.src = "";
                }
            }

            function sub(){
                console.log('sub');
                var file = document.getElementById("inputId").files[0];
                var formData = new FormData();
                formData.append('picture', file);

                fetch('/', {
                        method: 'POST',
                        body: formData
                    });
            };
        </script>
        <img id="imgId" src="" alt="...">
        <input id="inputId" type="file" name="avatar" onchange="onImageChange()">
        <input id="subId" type="submit" value="sub" >
<button type="button" name="button" onclick="sub()">button1</button>
    </body>
</html>
